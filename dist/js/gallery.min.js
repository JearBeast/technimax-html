function galleryBig(e,a,l){var s=a;if(e.attr("id")==s.otherImage)e=$("#galleryInsidePart1 a[data-rel='"+e.attr("data-rel")+"']");var i=e.parents(".gallery").attr("id"),d=i+"Inside",t=i+"ImageArrowLeft",r=i+"ImageArrowRight";if(s=a,0<$("body #galleryPresenter").length?$("#galleryImage img").attr("src",e.attr("data-rel")):(1==s.allowImageMove?$("body").append('<div id="galleryPresenter"><div id="galleryContent"><div id="galleryImage"><div title="'+s.backText+'" id="'+t+'" class="galleryImageArrowLeft"></div><img src="'+e.attr("data-rel")+'" alt="imgBigest"><div title="'+s.nextText+'" id="'+r+'" class="galleryImageArrowRight"></div></div><a href="#close" id="galleryClose" title="'+s.closeText+'"></a></div></div>'):$("body").append('<div id="galleryPresenter"><div id="galleryContent"><div id="galleryImage"><img src="'+e.attr("data-rel")+'" alt="imgBigest"></div><a href="#close" id="galleryClose" title="'+s.closeText+'"></a></div></div>'),!0===s.minigallery&&(!0===s.rolling?$("#galleryPresenter").append('<div id="galleryMini">'+$("#"+i).clone().html()+"</div>"):($("#galleryPresenter").append('<div id="galleryMini">'+$("#"+i).clone().html()+"</div>"),$("#galleryMini #"+d).append($("#"+d).clone().html()))),loadGalleryMini(i,s)),1==s.minigallery&&1==s.activateClass){var n=e.attr("data-rel");$("#galleryMini .galleryInsidePart a").removeClass("active"),$("#galleryMini .galleryInsidePart a[data-rel='"+n+"']").addClass("active")}if(1==s.allowStartEffect?$("#galleryPresenter").fadeIn():$("#galleryPresenter").show(),1==s.activateClass){n=e.attr("data-rel");$("#galleryMini .galleryInsidePart a").removeClass("active"),$("#galleryMini .galleryInsidePart a[data-rel='"+n+"']").addClass("active")}1==s.startCallbackInGallery&&"function"==typeof l&&l.call(this);$("#galleryClose").click(function(){1==s.allowStartEffect?$("#galleryPresenter").fadeOut():$("#galleryPresenter").hide()}),$("*[data-target=closeGallery]").click(function(){1==s.allowStartEffect?$("#galleryPresenter").fadeOut():$("#galleryPresenter").hide()}),1==s.allowCloseClickOut&&$(document).click(function(e){var a=$(e.target).closest("#"+d).length,l=$(e.target).closest("#galleryContent").length,i=$(e.target).closest("#galleryMini .galleryLeft").length,t=$(e.target).closest("#galleryMini .galleryRight").length,r=$(s.otherImage),n=$(e.target).closest(r.parent()).length,g=1;if(""!==s.otherImage&&(g=$(e.target).closest(s.noCloseElement).length),0==a&&0==l&&0==i&&0==t&&0==n&&0===g){1==s.allowStartEffect?$("#galleryPresenter").fadeOut():$("#galleryPresenter").hide()}})}function loadGalleryMini(e,t){var r=e+"Inside",n=e+"ImageArrowLeft",g=e+"ImageArrowRight",a=$("#galleryPresenter").height()-140;$("#galleryImage img").height(.98*a).load(function(){var e=$(this).width(),a=$(this).height(),l=$("#galleryMini #"+r+" img").length,i=($("#galleryMini #"+r+" img").width(),Math.floor(e*l-2*$("#galleryMini .galleryLeft").width()));$("#galleryContent").width(e+10).height(a+10),1==t.allowImageMove&&($("#"+g).height($("#galleryContent").height()),$("#"+n).height($("#galleryContent").height())),$("#galleryClose").css({"margin-left":$("#galleryContent").width()-20}),$("#galleryMini #"+r).height($("#galleryPresenter").height()-$("#galleryContent").height()-20).width(i).css({"margin-left":$("#galleryMini .galleryLeft").width()}),$("#galleryMini img").height($("#galleryMini #"+r).height()),$("#galleryMini a").height($("#galleryMini "+r).height()).width($("#galleryMini #"+r+" img").width()),$("#galleryMini .galleryLeft").height($("#galleryMini").height()),$("#galleryMini .galleryRight").height($("#galleryMini").height()),$("#galleryMini .galleryInsidePart").css({left:-$("#galleryMini .galleryInsidePart").width()})}),$("#galleryMini .galleryRight").on("click",function(){moveRight(t)}),$("#galleryMini .galleryLeft").on("click",function(){moveLeft(t)}),$("#galleryMini .galleryInsidePart a").on("click",function(){var e=$(this).attr("data-rel");$("#galleryMini a").removeClass("active"),$('#galleryMini a[data-rel="'+e+'"]').addClass("active"),changeBigPicture($(this).attr("data-rel"),t)}),1==t.allowKeyArrow&&$("html").on("keydown",function(e){37==e.which&&moveLeft(t,1),39==e.which&&moveRight(t,1)}),1==t.allowKeyAD&&$("html").on("keypress",function(e){97==e.which&&moveLeft(t,1),100==e.which&&moveRight(t,1)}),1==t.allowImageMove&&($("#"+g).on("click",function(){moveRight(t,1)}),$("#"+n).on("click",function(){moveLeft(t,1)})),$("#galleryMini .galleryInside .galleryInsidePart a img").each(function(){$(this).attr("src",$(this).parent("a").attr("data-rel2"))})}function moveLeft(e,a){var l=a,t=$("#galleryMini .galleryInsidePart").length,r=$("#galleryMini a").width()+parseInt($("#galleryMini a").css("padding-left"))+parseInt($("#galleryMini a").css("padding-right"));if(null==a&&(a=e.moveCount),1==e.rolling){parseInt($("#galleryMini #galerieLeft").width()),parseInt($("#galleryMini #galerieRight").width());if(0<=parseInt($("#galleryMini .galleryInsidePart").css("left"))+parseInt(r*a)){var n=parseInt($("#galleryMini .galleryInsidePart").css("left"))-parseInt($("#galleryMini .galleryInsidePart").width());$("#galleryMini .galleryInsidePart").css({left:n})}for($("#galleryMini #galleryInsidePart1").animate({left:"+="+r*a},e.speed,function(){null!=l&&changeBigPicture(backImage($(this).attr("id"),e),e)}),i=2;i<=t;i++)$("#galleryMini #galleryInsidePart"+i).animate({left:"+="+r*a},e.speed,function(){null!=l&&backImage($(this).attr("id"),e)})}else if(0<galerieClickPos2){if(!0===activationChangeMove)if(galerieClickPos2<=a){var g=0;activationChangeMove=!1}else g=a;else g=a;$("#galleryMini a").animate({left:"+="+$("#galleryMini a").width()*g},e.speed),galerieClickPos2-=a,galerieClickPos2<0&&(galerieClickPos2=0)}else $("#galleryMini a").animate({left:"-="+Maxes*$("#galleryMini a").width()},e.speed),galerieClickPos2=Maxes,activationChangeMove=!0}function moveRight(e,a){var l=a,t=$("#galleryMini .galleryInsidePart").length,r=$("#galleryMini a").width()+parseInt($("#galleryMini a").css("padding-left"))+parseInt($("#galleryMini a").css("padding-right"));if(null==a&&(a=e.moveCount),1==e.rolling){parseInt($("#galleryMini #galerieLeft").width()),parseInt($("#galleryMini #galerieRight").width());var n=-2*$("#galleryMini .galleryInsidePart").width();if(parseInt($("#galleryMini .galleryInsidePart").css("left"))<=n){var g=parseInt($("#galleryMini .galleryInsidePart").css("left"))+parseInt($("#galleryMini .galleryInsidePart").width());$("#galleryMini .galleryInsidePart").css({left:g})}for($("#galleryMini #galleryInsidePart1").animate({left:"-="+r*a},e.speed,function(){null!=l&&changeBigPicture(nextImage($(this).attr("id"),e),e)}),i=2;i<=t;i++)$("#galleryMini #galleryInsidePart"+i).animate({left:"-="+r*a},e.speed,function(){null!=l&&nextImage($(this).attr("id"),e)})}else if(galerieClickPos2<Maxes){if(galerieClickPos2>=Maxes-2){var s=calcPosuny;activationChangeMove=!0}else s=a;$("#galleryMini a").animate({left:"-="+$("#galleryMini a").width()*s},e.speed),galerieClickPos2+=a}else $("#galleryMini a").animate({left:"+="+Maxes*$("#galleryMini a").width()},e.speed),activationChangeMove=!1}function nextImage(e,a){var l=$("#galleryMini #"+e+" a.active"),i=$("#galleryMini #"+e+" img").length;if(l.index()>=i-1)var t=-1;else t=l.index();var r=$("#galleryMini #"+e+" a").eq(t+1);return $("#galleryMini #"+e+" a").eq(t).removeClass("active"),$("#galleryMini #"+e+" a").eq(t+1).addClass("active"),r.attr("data-rel")}function backImage(e,a){var l=$("#galleryMini #"+e+" a.active").index(),i=$("#galleryMini #"+e+" a").eq(l-1);return $("#galleryMini #"+e+" a").eq(l).removeClass("active"),$("#galleryMini #"+e+" a").eq(l-1).addClass("active"),i.attr("data-rel")}function changeBigPicture(e,a){var l=$("#galleryPresenter #galleryImage img"),i=$("#galleryMini #galleryInsidePart1").css("left");if(0==a.changeImageEffect)var t=l.hide().attr("src",e).show();else if(1==a.changeImageEffect)t=l.fadeOut(a.changeImageEffectSpeed,function(){$(this).attr("src",e),$(this).load(function(){$(this).fadeIn(a.changeImageEffectSpeed)})});else if(2==a.changeImageEffect)t=l.slideUp().bind().attr("src",e).slideDown(a.changeImageEffectSpeed);t.on("load",function(){$("#galleryMini .galleryInsidePart").css({left:i})})}$.fn.gallery=function(e,a){window.galerieClickPos2=0,window.activationChangeMove=!1;var l=$.extend({moveCount:1,speed:1e3,activateClass:!0,minigallery:!0,closeText:"Zavřít",nextText:"Další",backText:"Předchozí",minigalleryMoveCount:3,minigallerySpeed:1e3,activateClassMini:!0,allowKeyArrow:!0,allowKeyAD:!1,keyMoveType:0,rolling:!0,changeImageEffect:0,changeImageEffectSpeed:400,allowCloseClickOut:!0,allowImageMove:!0,allowStartEffect:!0,imagePaddingLeft:2,imagePaddingRight:2,otherImage:"",noCloseElement:"",startCallbackInGallery:!1,basePath:!1,duplicate:!0},e),i=new Array;i.minigallery=l.minigallery,i.closeText=l.closeText,i.nextText=l.nextText,i.backText=l.backText,i.moveCount=l.minigalleryMoveCount,i.speed=l.minigallerySpeed,i.activateClass=l.activateClassMini,i.allowKeyArrow=l.allowKeyArrow,i.allowKeyAD=l.allowKeyAD,i.keyMoveType=l.keyMoveType,i.rolling=l.rolling,i.changeImageEffect=l.changeImageEffect,i.changeImageEffectSpeed=l.changeImageEffectSpeed,i.allowCloseClickOut=l.allowCloseClickOut,i.allowImageMove=l.allowImageMove,i.allowStartEffect=l.allowStartEffect,i.otherImage=l.otherImage,i.noCloseElement=l.noCloseElement,i.startCallbackInGallery=l.startCallbackInGallery,i.duplicate=l.duplicate;var t=$(this).attr("id");$(this).addClass("gallery");var r="#"+t,n=$(r+" img"),g=$(r+" a"),s=t+"Left",d=t+"Right",o='<div class="galleryLeft" id="'+s+'"></div>',c='<div class="galleryRight" id="'+d+'"></div>',y=r+"Inside",h=0;h=""!==l.otherImage?n.length+1:n.length;n.width();var f=l.imagePaddingLeft+l.imagePaddingRight,v=g.width();g.css({"padding-left":l.imagePaddingLeft,"padding-right":l.imagePaddingRight});var m=-h*(v=g.width()+parseInt(g.css("padding-left"))+parseInt(g.css("padding-right")));if(1==l.rolling)var I=3*((v+f)*h+$(s).width()+$(d).width()+$("#"+d).width()+$("#"+s).width());else I=(v+f)*h+$(s).width()+$(d).width()+$("#"+d).width()+$("#"+s).width();var M=h-Math.floor((parseInt($(r).width())+f)/(parseInt(v)+parseInt(f)))+$("#"+d).width()+$("#"+s).width(),p=0;if(!0===l.rolling)var w="<div class='galleryInside' id='"+t+"Inside'><span id='galleryInsidePart1' class='galleryInsidePart'>"+$(r).clone().html()+"</span><span id='galleryInsidePart2' class='galleryInsidePart'>"+$(r).clone().html()+"</span><span id='galleryInsidePart3' class='galleryInsidePart'>"+$(r).clone().html()+"</span></div>";else w="<div class='galleryInside' id='"+t+"Inside'>"+$(r).clone().html()+"</div>";if(!0===l.rolling?($(r).append(o).append(w).append(c),$(y+" .galleryInsidePart").css({left:m})):$(r).append(o).append(w).append(c),""!==l.otherImage){$(l.otherImage);var P=$(l.otherImage).clone().removeAttr("id").removeClass("image");P.prependTo(y+" .galleryInsidePart"),$(P).css({"padding-left":l.imagePaddingLeft,"padding-right":l.imagePaddingRight})}return $(r).children("a").remove(),$(y).width(I),$("#"+s).on("click",function(){p-=l.moveCount,1==l.rolling?(0<=parseInt($(y+" .galleryInsidePart").css("left"))&&$(y+" .galleryInsidePart").css({left:m}),$(y+" .galleryInsidePart").animate({left:"+="+v*l.moveCount},l.speed)):0<=p?$(y+" a").animate({left:"+="+(v+f)*l.moveCount},l.speed):($(y+" a").animate({left:"-="+M*v},l.speed),p=M)}),$("#"+d).on("click",function(){p+=l.moveCount,1==l.rolling?(parseInt($(y+" .galleryInsidePart").css("left"))<=2*m&&$(y+" .galleryInsidePart").css({left:m}),$(y+" .galleryInsidePart").animate({left:"-="+v*l.moveCount},l.speed)):M<=p?$(y+" a").animate({left:"-="+v*l.moveCount},l.speed):($(y+" a").animate({left:"+="+M*v},l.speed),p=0)}),$.getScript("/js/galek/hash-detector.js",function(){var e=$("#galerie").hashDetector({name:"fotogalerie",detect:".fotogalerie",event:"addClass",eventParam:"noActive"});""!==e&&$("#galerie").hashDetector({name:"fotogalerie",detect:".fotogalerie",event:"addClass",eventParam:"noActive"},function(){!0===l.activateClass&&($(r+" "+y+" a").removeClass("active"),$(e).addClass("active")),galleryBig($(e),i,a)})}),$(r+" "+y+" .galleryInsidePart a").on("click",function(){var e=$(this).attr("class");1==l.activateClass&&($(r+" "+y+" a").removeClass("active"),$(this).addClass("active")),window.location.hash=e.replace(" ","-"),galleryBig($(this),i,a)}),0==l.startCallbackInGallery&&"function"==typeof a&&a.call(this),this};