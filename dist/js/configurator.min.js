Number.prototype.formatMoney=function(e,t,a){var r=this,n=(e=isNaN(e=Math.abs(e))?2:e,t=void 0===t?".":t,a=void 0===a?",":a,r<0?"-":""),d=parseInt(r=Math.abs(+r||0).toFixed(e))+"",i=3<(i=d.length)?i%3:0;return n+(i?d.substr(0,i)+a:"")+(i<3?d.substr(i):d.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+a))+(e?t+Math.abs(r-d).toFixed(e).slice(2):"")},$("#frm-pridatRecenziForm").hide(),$("#showAddRecenze").on("click",function(){$("#frm-pridatRecenziForm").fadeIn()}),$("#showAddRecenzeButton").on("click",function(){$("#frm-pridatRecenziForm").fadeIn()});var configurator=function(o,c,h,u,l,f,p){var i=new Array,e=($("form#konfigurace input:checked").length,g(c)),t=h/100,a=Math.ceil(e*t),r=Math.ceil(parseInt(e+a));function v(){$(".reservationAjax").attr("data-konf",n()[0]),$(".reservationAjax").attr("data-konf-amount",k()[1]),$(".buyAjax").attr("data-konf-amount",k()[1]),$(".offerAjax").attr("data-konf",n()[0]),$(".offerAjax").attr("data-konf-amount",k()[1]),$(".offerExistsAjax").attr("data-konf",n()[0]),$(".offerExistsAjax").attr("data-konf-amount",k()[1]);var e=$(".reservationAjax").attr("data-konf");void 0!==e&&($(".reservationAjax").attr("data-konf",e.replace(/,/g,"-")),$(".offerAjax").attr("data-konf",e.replace(/,/g,"-")),$(".offerExistsAjax").attr("data-konf",e.replace(/,/g,"-")));var t=$(".reservationAjax").attr("data-konf-amount");void 0!==t&&($(".reservationAjax").attr("data-konf-amount",t.replace(/,/g,"-")),$(".offerAjax").attr("data-konf-amount",t.replace(/,/g,"-")),$(".offerExistsAjax").attr("data-konf-amount",t.replace(/,/g,"-")),$(".buyAjax").attr("data-konf-amount",t.replace(/,/g,"-")))}$("#priceNoDPHConf").html(e.formatMoney(0,""," ")+" "+l+" "+p),$("#priceDPHConf").html(r.formatMoney(0,""," ")+" "+l+" "+f),$("form#konfigurace input").change(function(){var e=$("form#konfigurace input:checked").length,t=$(this).attr("data-rel").replace("NUM",""),a=$(this).parent().parent().find(".info").attr("data-rel");0==$(this).parent().find(".info").attr("data-rel")?delete i[t]:("000002031000100203"!=a&&"000002031000102582"!=a&&"000002031000102607"!=a&&"000002031000100231"!=a&&"000002444400125808"!=a&&"000002080800100236"!=a||("000002031000100203"==a||"000002031000102582"==a?($(".su"+a).removeClass("hidden"),index2="1"+t+"1",delete i[index2],$(".su000002031000100231 input").attr("checked",!1),$(".su000002080800100236").addClass("hidden"),$(".su000002080800100236 input").attr("checked",!1)):("000002031000102607"==a||"000002031000100231"==a?($(".su"+a).removeClass("hidden"),$(".su000002031000100203").addClass("hidden"),$(".su000002031000100203 input").attr("checked",!1),$(".su000002080800100236").addClass("hidden"),$(".su000002080800100236 input").attr("checked",!1)):($(".su"+a).removeClass("hidden"),$(".su000002031000100203").addClass("hidden"),$(".su000002031000100203 input").attr("checked",!1),$(".su000002031000102607").addClass("hidden"),$(".su000002031000102607 input").attr("checked",!1)),index2="1"+t+"1",delete i[index2]),$("form#konfigurace input[data-rel="+index2+"]").prop("checked",!1),$(this).prop("checked",!0),i[t]=$(this).parent().parent().find(".info").attr("data-rel"),"000002031000100231"==a||"000002031000102607"==a?$(".su"+a).removeClass("hidden"):"000002444400125808"==a||"000002080800100236"==a?($(".su"+a).removeClass("hidden"),$(".su000002031000100231").addClass("hidden"),$(".su000002031000100203").addClass("hidden")):($(".su"+a).removeClass("hidden"),$(".su000002031000100231").addClass("hidden"),$(".su000002080800100236").addClass("hidden")),i[t]=$(this).parent().parent().find(".info").attr("data-rel")),null==i[t]?i[t]=$(this).parent().parent().find(".info").attr("data-rel"):delete i[t],0<$(this).parent().parent().parent().find("input[type=checkbox]").length&&0!=$(this).attr("data-reset")&&("000002031000100203"==a||"000002031000102582"==a||"000002031000102607"==a||"000002031000100231"==a||"000002444400125808"==a||"000002080800100236"==a||(index2="1"+t+"1",delete i[index2],$(".su000002031000100231 input").attr("checked",!1),$(".su000002031000100203 input").attr("checked",!1),$(".su000002080800100236 input").attr("checked",!1),$(".su000002031000100231").addClass("hidden"),$(".su000002031000100203").addClass("hidden"),$(".su000002080800100236").addClass("hidden"))));for(var r=$(".server-hdd"),n=0;n<r.length;n++){var d=r.eq(n).parent().parent().find(".server-input");d.attr("data-count",d.val())}if(0<$("form#konfigurace input:checked").length)for(n=0;n<e;n++)if($("form#konfigurace input[type=checkbox]:checked").eq(n).val()&&$("form#konfigurace input[type=checkbox]:checked").eq(n).hasClass("server-hdd")){$("form#konfigurace input[type=checkbox]:checked").eq(n).parent().parent().parent().find("input[data-reset=1]");1!=$(this).attr("data-reset")?$("form#konfigurace input[data-rel="+$(this).attr("data-parent-rel")+"]").attr("checked",!1):$("form#konfigurâ˜ºace input[data-rel="+$(this).attr("data-rel")+"]").attr("checked",!1)}v(),g(c)}),$(".server-hdd-reset").on("change",function(e){$(this).prop("checked")&&$(".server-hdd").prop("checked",!1),v(),g(c)}),$(".server-hdd").on("change",function(e){var t=$(".server-input[data-rel="+$(this).attr("data-rel")+"]"),a=getHddRealCountsChecked();1==$(this).prop("checked")?0==t.val()&&(getHddRealCounts()>=u?t.val(0):t.val(1)):t.val(0),0==$(".server-hdd:checked").length?$(".server-hdd-reset").prop("checked",!0):$(".server-hdd-reset").prop("checked",!1),a==u&&($(this).prop("checked",!1),t.val(0),$(this).prop("checked",!1)),v(),g(c)}),$(".server-input").on("change",function(e){var t=$(".server-hdd"),a=$(this).val(),r=getHddRealCounts()-a;if(0!=u){var n=u-r;r<u?n<a?$(this).val(n):a<0&&$(this).val(0):$(this).val(0);t=$(".server-hdd");for(var d=0;d<t.length;d++){var i=t.eq(d).parent().parent().find(".server-input");i.attr("data-count",i.val()),0<i.val()&&t.eq(d).prop("checked",!0)}0==$(this).val()&&$(".server-hdd[data-rel="+$(this).attr("data-rel")+"]").prop("checked",!1),0==$(".server-hdd:checked").length?$(".server-hdd-reset").prop("checked",!0):$(".server-hdd-reset").prop("checked",!1);var o=$(".server-input");for(d=0;d<o.length;d++){var s=o[d];0==s.value&&$(".server-hdd[data-rel="+s.getAttribute("data-rel")+"]").prop("checked",!1)}v(),g(c)}else $(this).val(0)});var s=1;function n(){for(var e=$("form#konfigurace input[data-nochange=0]:checked"),t=[],a=[],r=[],n=0;n<e.length;n++){var d=e[n].getAttribute("data-rel");a[n]=e[n].getAttribute("data-oid"),r[n]=$("form#konfigurace input[data-amount=1][data-rel="+d+"]").val()}return t[0]=a,t[1]=r,t}function k(){for(var e=$("form#konfigurace input[data-nochange=0]:checked"),t=[],a=[],r=[],n=0,d=0;d<e.length;d++){var i=e[d].getAttribute("data-rel"),o=$("form#konfigurace input[data-amount=1][data-rel="+i+"]").val();a[d]=e[d].getAttribute("data-oid"),r[n]=a[d],r[++n]=o&&0!==o?o:1,n++}return t[0]=a,t[1]=r,t}function g(e){for(var t=$("form#konfigurace input[data-nochange=0]:checked"),a=0;a<t.length;a++){var r=t[a].getAttribute("data-rel"),n=$("form#konfigurace input[data-amount=1][data-rel="+r+"]").val();amount=n||1,e+=parseInt(t[a].value)*parseInt(amount)}var d=Math.ceil(e),i=h/100,o=Math.ceil(d*i),s=Math.ceil(parseInt(d+o));return $("#priceNoDPHConf").html(d.formatMoney(0,""," ")+" "+l+" "+p),$("#priceDPHConf").html(s.formatMoney(0,""," ")+" "+l+" "+f),d}$(".buy a.buyDetail").on("click",function(){s=$(".addToBasketCount input").val();for(var e=[],t=[],a=0,r=k(),n=r[0],d=r[1],i=0;i<n.length;i++)null!=n[i]&&(e[a]=n[i],null!=d[i]&&(t[a]=d[i]),a++);$.nette.ajax({url:"?do=addToBasketKonfigurace",data:{id:o,konf:e,konfamounts:d,count:s}}).done(function(){$("#header").hasClass("headerSlide")?$("#header").is(":visible")?$("#basketContent").slideDown():$("#header").slideDown(400,function(){$("#basketContent").slideDown()}):$("#basketContent").slideDown()})})};function getHddRealCounts(){for(var e=$(".server-hdd"),t=0,a=0;a<e.length;a++)t+=parseInt(e.eq(a).parent().parent().find(".server-input").val());return t}function getHddRealCountsChecked(){for(var e=$(".server-hdd:checked"),t=0,a=0;a<e.length;a++)t+=parseInt(e.eq(a).parent().parent().find(".server-input").val());return t}$("#addRecenzeStars label").addClass("active"),$("#addRecenzeStars label").on("mouseenter",function(){var e=$(this).children("input").val();for($("#addRecenzeStars label").children("input").attr("checked",!1),$(this).children("input").attr("checked","checked"),i=e;1<=i;i--)$("#addRecenzeStars label[for=frm-pridatRecenziForm-hodnoceni-"+i).addClass("active");for(i=5;i>e;i--)$("#addRecenzeStars label[for=frm-pridatRecenziForm-hodnoceni-"+i).removeClass("active");down=!0}),$(".addToBasketCount input").change(function(){$(this).parent().parent().parent().parent().find(".buy").children("a").attr("data-count",$(this).val());var e=$(".buy .dropdown-menu a"),t=$(this).val();e.each(function(e){$(this).attr("data-count",t)})});